"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ListAdoptionsService = void 0;
const ecs = require("aws-cdk-lib/aws-ecs");
const aws_ecr_assets_1 = require("aws-cdk-lib/aws-ecr-assets");
const ecs_service_1 = require("./ecs-service");
class ListAdoptionsService extends ecs_service_1.EcsService {
    constructor(scope, id, props) {
        var _a;
        super(scope, id, props);
        (_a = props.database.secret) === null || _a === void 0 ? void 0 : _a.grantRead(this.taskDefinition.taskRole);
    }
    containerImageFromRepository(repositoryURI) {
        return ecs.ContainerImage.fromRegistry(`${repositoryURI}/pet-listadoptions:latest`);
    }
    createContainerImage() {
        return ecs.ContainerImage.fromDockerImageAsset(new aws_ecr_assets_1.DockerImageAsset(this, "petlistadoptions-go", { directory: "./resources/microservices/petlistadoptions-go" }));
    }
}
exports.ListAdoptionsService = ListAdoptionsService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1hZG9wdGlvbnMtc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxpc3QtYWRvcHRpb25zLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQTJDO0FBRTNDLCtEQUE4RDtBQUM5RCwrQ0FBMkQ7QUFRM0QsTUFBYSxvQkFBcUIsU0FBUSx3QkFBVTtJQUVsRCxZQUFZLEtBQWdCLEVBQUUsRUFBVSxFQUFFLEtBQStCOztRQUN2RSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixNQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSwwQ0FBRSxTQUFTLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQsNEJBQTRCLENBQUMsYUFBcUI7UUFDaEQsT0FBTyxHQUFHLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxHQUFHLGFBQWEsMkJBQTJCLENBQUMsQ0FBQTtJQUNyRixDQUFDO0lBRUQsb0JBQW9CO1FBQ2xCLE9BQU8sR0FBRyxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLGlDQUFnQixDQUFDLElBQUksRUFBQyxxQkFBcUIsRUFDOUYsRUFBRSxTQUFTLEVBQUUsK0NBQStDLEVBQUMsQ0FDNUQsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGO0FBakJELG9EQWlCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGVjcyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWNzJztcbmltcG9ydCAqIGFzIHJkcyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtcmRzJztcbmltcG9ydCB7IERvY2tlckltYWdlQXNzZXQgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWNyLWFzc2V0cyc7XG5pbXBvcnQgeyBFY3NTZXJ2aWNlLCBFY3NTZXJ2aWNlUHJvcHMgfSBmcm9tICcuL2Vjcy1zZXJ2aWNlJ1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSAnY29uc3RydWN0cydcblxuXG5leHBvcnQgaW50ZXJmYWNlIExpc3RBZG9wdGlvblNlcnZpY2VQcm9wcyBleHRlbmRzIEVjc1NlcnZpY2VQcm9wcyB7XG4gIGRhdGFiYXNlOiByZHMuU2VydmVybGVzc0NsdXN0ZXJcbn1cblxuZXhwb3J0IGNsYXNzIExpc3RBZG9wdGlvbnNTZXJ2aWNlIGV4dGVuZHMgRWNzU2VydmljZSB7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IExpc3RBZG9wdGlvblNlcnZpY2VQcm9wcyAgKSB7XG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XG5cbiAgICBwcm9wcy5kYXRhYmFzZS5zZWNyZXQ/LmdyYW50UmVhZCh0aGlzLnRhc2tEZWZpbml0aW9uLnRhc2tSb2xlKTtcbiAgfVxuXG4gIGNvbnRhaW5lckltYWdlRnJvbVJlcG9zaXRvcnkocmVwb3NpdG9yeVVSSTogc3RyaW5nKSA6IGVjcy5Db250YWluZXJJbWFnZSB7XG4gICAgcmV0dXJuIGVjcy5Db250YWluZXJJbWFnZS5mcm9tUmVnaXN0cnkoYCR7cmVwb3NpdG9yeVVSSX0vcGV0LWxpc3RhZG9wdGlvbnM6bGF0ZXN0YClcbiAgfVxuXG4gIGNyZWF0ZUNvbnRhaW5lckltYWdlKCkgOiBlY3MuQ29udGFpbmVySW1hZ2Uge1xuICAgIHJldHVybiBlY3MuQ29udGFpbmVySW1hZ2UuZnJvbURvY2tlckltYWdlQXNzZXQobmV3IERvY2tlckltYWdlQXNzZXQodGhpcyxcInBldGxpc3RhZG9wdGlvbnMtZ29cIiwgXG4gICAgeyBkaXJlY3Rvcnk6IFwiLi9yZXNvdXJjZXMvbWljcm9zZXJ2aWNlcy9wZXRsaXN0YWRvcHRpb25zLWdvXCJ9XG4gICAgKSlcbiAgfSBcbn1cbiJdfQ==