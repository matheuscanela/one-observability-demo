"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PayForAdoptionService = void 0;
const ecs = require("aws-cdk-lib/aws-ecs");
const aws_ecr_assets_1 = require("aws-cdk-lib/aws-ecr-assets");
const ecs_service_1 = require("./ecs-service");
class PayForAdoptionService extends ecs_service_1.EcsService {
    constructor(scope, id, props) {
        var _a;
        super(scope, id, props);
        (_a = props.database.secret) === null || _a === void 0 ? void 0 : _a.grantRead(this.taskDefinition.taskRole);
    }
    containerImageFromRepository(repositoryURI) {
        return ecs.ContainerImage.fromRegistry(`${repositoryURI}/pet-payforadoption:latest`);
    }
    createContainerImage() {
        return ecs.ContainerImage.fromDockerImageAsset(new aws_ecr_assets_1.DockerImageAsset(this, "pay-for-adoption", {
            directory: "./resources/microservices/payforadoption-go"
        }));
    }
}
exports.PayForAdoptionService = PayForAdoptionService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF5LWZvci1hZG9wdGlvbi1zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicGF5LWZvci1hZG9wdGlvbi1zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUEyQztBQUUzQywrREFBOEQ7QUFDOUQsK0NBQTJEO0FBTzNELE1BQWEscUJBQXNCLFNBQVEsd0JBQVU7SUFFbkQsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFpQzs7UUFDekUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEIsTUFBQSxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sMENBQUUsU0FBUyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVELDRCQUE0QixDQUFDLGFBQXFCO1FBQ2hELE9BQU8sR0FBRyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsR0FBRyxhQUFhLDRCQUE0QixDQUFDLENBQUE7SUFDdEYsQ0FBQztJQUVELG9CQUFvQjtRQUNsQixPQUFPLEdBQUcsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsSUFBSSxpQ0FBZ0IsQ0FBQyxJQUFJLEVBQUMsa0JBQWtCLEVBQUU7WUFDM0YsU0FBUyxFQUFFLDZDQUE2QztTQUN6RCxDQUFDLENBQUMsQ0FBQTtJQUNMLENBQUM7Q0FDRjtBQWpCRCxzREFpQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBlY3MgZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjcyc7XG5pbXBvcnQgKiBhcyByZHMgZnJvbSAnYXdzLWNkay1saWIvYXdzLXJkcyc7XG5pbXBvcnQgeyBEb2NrZXJJbWFnZUFzc2V0IH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjci1hc3NldHMnO1xuaW1wb3J0IHsgRWNzU2VydmljZSwgRWNzU2VydmljZVByb3BzIH0gZnJvbSAnLi9lY3Mtc2VydmljZSdcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5Rm9yQWRvcHRpb25TZXJ2aWNlUHJvcHMgZXh0ZW5kcyBFY3NTZXJ2aWNlUHJvcHMge1xuICBkYXRhYmFzZTogcmRzLlNlcnZlcmxlc3NDbHVzdGVyXG59XG5cbmV4cG9ydCBjbGFzcyBQYXlGb3JBZG9wdGlvblNlcnZpY2UgZXh0ZW5kcyBFY3NTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3RvcihzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogUGF5Rm9yQWRvcHRpb25TZXJ2aWNlUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcblxuICAgIHByb3BzLmRhdGFiYXNlLnNlY3JldD8uZ3JhbnRSZWFkKHRoaXMudGFza0RlZmluaXRpb24udGFza1JvbGUpO1xuICB9XG5cbiAgY29udGFpbmVySW1hZ2VGcm9tUmVwb3NpdG9yeShyZXBvc2l0b3J5VVJJOiBzdHJpbmcpIDogZWNzLkNvbnRhaW5lckltYWdlIHtcbiAgICByZXR1cm4gZWNzLkNvbnRhaW5lckltYWdlLmZyb21SZWdpc3RyeShgJHtyZXBvc2l0b3J5VVJJfS9wZXQtcGF5Zm9yYWRvcHRpb246bGF0ZXN0YClcbiAgfVxuXG4gIGNyZWF0ZUNvbnRhaW5lckltYWdlKCkgOiBlY3MuQ29udGFpbmVySW1hZ2Uge1xuICAgIHJldHVybiBlY3MuQ29udGFpbmVySW1hZ2UuZnJvbURvY2tlckltYWdlQXNzZXQobmV3IERvY2tlckltYWdlQXNzZXQodGhpcyxcInBheS1mb3ItYWRvcHRpb25cIiwge1xuICAgICAgZGlyZWN0b3J5OiBcIi4vcmVzb3VyY2VzL21pY3Jvc2VydmljZXMvcGF5Zm9yYWRvcHRpb24tZ29cIlxuICAgIH0pKVxuICB9XG59XG4iXX0=